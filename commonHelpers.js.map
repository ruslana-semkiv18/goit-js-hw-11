{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst key = \"44916232-ab67e58f2cd7c4a8ed03790be\";\nconst url = \"https://pixabay.com/api/\";\n\nconst containerCard = document.querySelector(\".card-container\");\nconst form = document.querySelector(\".search-form\");\n\nform.addEventListener(\"submit\", handlerSearch);\n\nconst loader = document.querySelector(\".loader\");\n\n\nfunction fetchGallery(q) {\n  loader.style.display = \"block\"; \n  return fetch(`${url}?key=${key}&q=${q}&image_type=photo&orientation=horizontal&safesearch=true`)\n    .then((res) => {\n      if (!res.ok) {\n        throw new Error(res.status);\n      }\n      return res.json();\n    })\n    .finally(() => {\n        loader.style.display = \"none\"; \n    });\n}\n\n\n\nfunction handlerSearch(evt) {\n  evt.preventDefault();\n\n  const form = evt.currentTarget;\n  const queryValue = form.elements.query.value.trim().toLowerCase(); \n  if (!queryValue) {\n    return;\n  }\n\n  containerCard.innerHTML = '';\n\n  fetchGallery(queryValue) \n    .then(data => {\n       if (data.hits.length === 0) {\n        throw new Error();\n    }\n     renderCard(data.hits)\n    }) \n    .catch(onFetchError) \n    .finally(() => form.reset()); \n}\n\n\n\nfunction renderCard(img) {\n  containerCard.innerHTML = img.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n      `<div class=\"card\">\n        <div class=\"card-img\">\n         <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n        </div>\n        <div class=\"card-body\">\n         <ul class=\"card-list\">\n          <li class=\"card-item\"><span>Likes</span>${likes}</li>\n          <li class=\"card-item\"><span>Views</span>${views}</li>\n          <li class=\"card-item\"><span>Comments</span>${comments}</li>\n          <li class=\"card-item\"><span>Downloads</span>${downloads}</li>\n         </ul>\n       </div>\n      </div>`).join(\"\");\n  \n  const lightbox = new SimpleLightbox('.card-img a', {\n    captions: true,\n    captionsData: \"alt\",\n    captionPosition: \"bottom\",\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n }\n\nfunction onFetchError(error) {\n  iziToast.error({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '1.5',\n    messageFontWeight: '400',\n    backgroundColor: '#ef4040',\n    close: true,\n    position: 'topRight',            \n    progressBarColor: '#b51b1b',\n   \n});\n}\n"],"names":["key","url","containerCard","form","handlerSearch","loader","fetchGallery","q","res","evt","queryValue","data","renderCard","onFetchError","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","error","iziToast"],"mappings":"6vBAKA,MAAMA,EAAM,qCACNC,EAAM,2BAENC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAO,SAAS,cAAc,cAAc,EAElDA,EAAK,iBAAiB,SAAUC,CAAa,EAE7C,MAAMC,EAAS,SAAS,cAAc,SAAS,EAG/C,SAASC,EAAaC,EAAG,CACvB,OAAAF,EAAO,MAAM,QAAU,QAChB,MAAM,GAAGJ,CAAG,QAAQD,CAAG,MAAMO,CAAC,0DAA0D,EAC5F,KAAMC,GAAQ,CACb,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACjB,CAAK,EACA,QAAQ,IAAM,CACXH,EAAO,MAAM,QAAU,MAC/B,CAAK,CACL,CAIA,SAASD,EAAcK,EAAK,CAC1BA,EAAI,eAAc,EAElB,MAAMN,EAAOM,EAAI,cACXC,EAAaP,EAAK,SAAS,MAAM,MAAM,KAAI,EAAG,cAC/CO,IAILR,EAAc,UAAY,GAE1BI,EAAaI,CAAU,EACpB,KAAKC,GAAQ,CACX,GAAIA,EAAK,KAAK,SAAW,EACxB,MAAM,IAAI,MAEbC,EAAWD,EAAK,IAAI,CACzB,CAAK,EACA,MAAME,CAAY,EAClB,QAAQ,IAAMV,EAAK,MAAK,CAAE,EAC/B,CAIA,SAASS,EAAWE,EAAK,CACvBZ,EAAc,UAAYY,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACvG;AAAA;AAAA,oBAEcL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,oDAItBC,CAAK;AAAA,oDACLC,CAAK;AAAA,uDACFC,CAAQ;AAAA,wDACPC,CAAS;AAAA;AAAA;AAAA,aAGpD,EAAE,KAAK,EAAE,EAEH,IAAIC,EAAe,cAAe,CACjD,SAAU,GACV,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAG,EACQ,QAAO,CAChB,CAEF,SAAST,EAAaU,EAAO,CAC3BC,EAAS,MAAM,CACb,QAAS,2EACT,aAAc,OACd,YAAa,OACb,kBAAmB,MACnB,kBAAmB,MACnB,gBAAiB,UACjB,MAAO,GACP,SAAU,WACV,iBAAkB,SAEtB,CAAC,CACD"}